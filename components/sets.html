<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CJSBHB1TS4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CJSBHB1TS4');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/assets/images/icons/pageIcon2.png" type="image/png">
  <title>Pokemon Expansion Sets</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script type="module" src="/assets/js/firebase-init.js"></script>
</head>
<body>
  <header>
    <div class="logo">
      <img src="/assets/images/icons/pagelogo.png" alt="LilyCove Logo" style="height: 50px;">
    </div>
    <input type="text" placeholder="Search for cards, sets, tcg">
    <nav>
      <a href="/index.html">Home</a>
      <a href="/components/sets.html">Pokemon</a>
    </nav>
    <div class="user-icons">
      <i class="fas fa-user"></i> <!-- User Icon -->
      <i class="fas fa-sign-out-alt"></i> <!-- Logout Icon -->
      <i class="fas fa-bell"></i> <!-- Notifications Icon -->
    </div>
  </header>

  <main>
    <section class="expansion-header">
      <h1>Pokemon Expansion Sets</h1>
      <div class="language-options">
        <a href="#" class="active">English</a>
        <a href="#">Japanese</a>
      </div>
      <hr class="divider"> <!-- Divider line below the language options -->
    </section>

    <section class="expansion-grid" id="expansion-grid">
      <!-- Expansion sets will be dynamically loaded here -->
    </section>
  </main>

  <script type="module">    
    // Import Firestore from Firebase
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

    // Access the Firestore instance from firebase-init.js
    const db = getFirestore();

    // Function to load sets data
    async function loadSets() {
      const expansionGrid = document.getElementById('expansion-grid');
      const setsCollection = collection(db, 'sets'); // Make sure 'sets' is your collection name
      const setsSnapshot = await getDocs(setsCollection);

      setsSnapshot.forEach(doc => {
        const setData = doc.data();
        const setElement = document.createElement('a');
        setElement.href = `cards.html?set=${setData.id}`; // Link to cards page with set ID
        setElement.classList.add('expansion-item');

        const img = document.createElement('img');
        img.src = setData.imageUrls.logo; // Make sure this matches your Firestore data
        img.alt = setData.name;
        setElement.appendChild(img);

        const p = document.createElement('p');
        p.textContent = setData.name;
        setElement.appendChild(p);

        expansionGrid.appendChild(setElement);
      });
    }

    // Load sets on page load
    loadSets();
  </script>
</body>
</html>